<!DOCTYPE html>

<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
      <title>Altistukset</title>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col"></div>
        <div class="col-10">
          <h1 class="text-center mt-5 display-3">Altistukset</h1>
          <p>Uutisoituja/tiedotettuja korona-altistuksia (ei välttämättä kaikkia). Poimittu
            <a href="https://twitter.com/Tqwerty123a">@Tqwerty123a</a>:n twiiteistä ja
            <a href="https://altistukset.blogspot.com/">blogista</a>. Uutisointipäivämäärät linkkaavat blogiteksteihin.
          </p>
          <div class="mb-2">
            {% for municipality, exposures in exposures_by_municipality.items %}
              <a class="btn btn-primary" href="#{{ municipality }}">{{ municipality }} ({{ exposures.count }})</a>
            {% endfor %}
          </div>
          <table class="table table-bordered table-hover table-sm">
        {% for municipality, exposures in exposures_by_municipality.items %}
            <thead class="thead-light">
              <tr>
                <td class="text-left" id="{{ municipality }}" colspan="6">
                  <b>{{ municipality }} ({{ exposures.count }})</b>
                </td>
              </tr>
              <tr>
                <th>#</th>
                <th>Paikka</th>
                <th>Tyyppi</th>
                <th>Karanteenissa</th>
                <th>Tapahtui</th>
                <th>Uutisoitiin</th>
              </tr>
            </thead>
            <tbody>
            {% for exposure in exposures %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ exposure.location }}</td>
                <td>{{ exposure.display_category }}</td>
                <td class="text-right">{{ exposure.display_total }}</td>
                <td class="text-right">{{ exposure.exposure_date|date:"d.m.Y" }}</td>
                <td class="text-right">
                    {% if exposure.news_link %}
                    <a href="{{ exposure.news_link }}">
                      {{ exposure.publish_date|date:"d.m.Y" }}
                    </a>
                    {% else %}
                      {{ exposure.publish_date|date:"d.m.Y" }}
                    {% endif %}
                </td>
              </tr>
            {% endfor %}
            </tbody>
        {% endfor %}
          </table>
          <div>
            <small>
              Koodaus ja serverin pystytys/ylläpito: <a href="https://jln.fi">Jarno Luoma-Nirva</a>.
              Koodi on avointa ja saatavilla <a href="https://github.com/jarnoln/exposures">GitHubista</a>.
            </small>
          </div>
        </div>
        <div class="col"></div>
      </div>
    </div>
  </body>
</html>
